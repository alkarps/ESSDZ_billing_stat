# ESSDZ_billing_stat
Скрипт по сбору статистики по биллингу в рамках проекта ЕССДЗ

Для работы необходимо добавить два файла:

1. mailsettings.py содержащий следующими дефолтные параметры:
  а) default_server - адрес сервера почты.
  б) default_port - порт, на котором развернута почта.
  в) default_user = логин по-умолчанию. Необходимо указать полный email. От него будут приходить сообщения,
  если не будет указано другое явно при вызове функции.
  г) default_passwd = пароль по-умолчанию.
  Данный настроичный файл нужен для модуля mail.py.
  
2. settingfile.py содержит параметры подключения к БД, параметры авторизации 
  на веб-сервисе, тему письма и от кого отправлять письмо. Необходим для работы самого скрипта.
  Содержит следующие параметры:
  а)settingList - параметры подключения к БД. Указывать следующим видом:
  [(логин,пароль,хост,порт,сид,сервисное_имя,имя_БД),(логин2,пароль2,хост2,порт2,сид2,сервисное_имя2,имя_БД2),...];
  Необходимо указать либо сид, либо сервисное_имя. Для опускаемого параметра необходимо указать значение None. 
  Должно быть указано как минимум одно подключение.
  Пример заполнения:
  [('login','asd','localhost',123,'sdf',None,'Тестовая БД'),('login2','password2','localhost',321,None,'asd','asd')];
  б)wsSettingList - параметры авторизации для получения информации о биллинге. Указываются в следующем виде:
  {имя_БД:[login,password,appPkid]}
  Пример заполнения: {'Тестовая БД':['aqwd','awd2aqw',8812]}
  в)to - список адресатов, кому отправлять письма. Указывать в следующем ввиде:
  "to@mail.ru, to@yandex.ru"
  г)toView - список адресатов, которые будут отображаться в письме. Указывать в виде:
  "to@mail.ru, to@yandex.ru"
  д)subject - тема письма.
